# Регламент правил коммитов и работы с ветками

## 1. Структура веток

Наш стартап использует модель Gitflow для организации работы с кодом. Основные ветки:

- `main` - основная ветка, содержащая стабильный код, готовый к релизу/продакшн
- `development` - ветка разработки, куда сливаются все новые функциональности
- Ветки функциональностей (`feature/**`) - для разработки новых функций
- Ветки исправлений (`bugfix/**`) - для исправления ошибок

- Ветки быстрых исправлений (`hotfix/**`) - для срочных исправлений в продакшн

## 2. Правила именования коммитов

### 2.1 Связывание коммитов с таск-трекером

Если коммит связан с какой-нибудь задачей в Jira, то их нужно связать следующим образом:  

1. Находим свою задачу в Jira
2. Находим тег задачи. (например, TP-58)
3. В самом начале коммита в скобках пишем тег задачи

### 2.2 Префиксы коммитов

Все коммиты должны иметь префикс, определяющий тип изменения:

- `feat:` - добавление новой функциональности
- `fix:` - исправление ошибки
- `style:` - форматирование, отступы (не влияющие на логику)
- `refactor:` - рефакторинг кода
- `test:` - добавление или исправление тестов
- `chore:` - обновление зависимостей, конфигурации сборки и т.д.

Следующие префиксы коммитов использовать в коммитах, не влияющие на функционал (например, документацию):

- `add:` - при добавлении файлов
- `change:` - при изменении файлов
- `delete:` - при удалении файлов

### 2.3 Тело коммита

- Сокращать длинные слова, если они будут понятны в сокращении. (например function на func)
- Все коммиты называем на английском языке, в настоящем простом времени (например, add auth function)

### 2.4 Примеры правильных коммитов:
```
(TP-53) feat: add auth func through Google
(TP-72) fix: fix error validation for register form
refactor: optimize db queries
```

## 3. Рабочий процесс (Gitflow Workflow)

### 3.1 Разработка новой функциональности

1. Создать новую ветку от `development` с названием `feature/(тег-задачи)-название-функциональности`
2. Выполнить разработку с регулярными коммитами
3. После завершения разработки, создать Pull Request в ветку `development`
4. После code review и успешного прохождения тестов, мержить ветку в `development`

### 3.2 Исправление ошибок

1. Создать новую ветку от `development` с названием `fix/(тег-задачи)-описание-ошибки`
2. Исправить ошибку и сделать коммит
3. Создать Pull Request в ветку `development`
4. После code review и успешного прохождения тестов, мержить ветку в `development`

### 3.3 Подготовка релиза

1. Протестировать все изменения в ветке `development`
2. После успешного тестирования, создать Pull Request из `development` в `main`
3. После мержа в `main`, создать релиз на GitHub с соответствующим тегом и описанием изменений

### 3.4 Срочные исправления в продакшн

1. Создать новую ветку от `main` с названием `hotfix/описание-исправления`
2. Исправить ошибку и сделать коммит
3. После тестирования, мержить ветку в `main` и `development`
4. Обновить тег версии в ветке `main`

## 4. Правила Pull Request

1. Каждый Pull Request должен иметь понятное описание изменений
2. Все тесты должны успешно проходить
4. CI-проверки должны быть успешными перед мержем


## 5. Тестирование

1. Все изменения в ветке `development` должны проходить автоматизированное тестирование
2. Перед мержем в `main` проводится полное тестирование
3. Работа на продакшн запрещена без успешного прохождения всех тестов

## 6. Релизы на GitHub

1. Релизы создаются непосредственно на GitHub после мержа из `development` в `main`
2. Каждый релиз должен иметь семантическое версионирование (MAJOR.MINOR.PATCH)
3. В описании релиза необходимо указать все значимые изменения (чанглог)
4. При создании релиза на GitHub автоматически создается соответствующий тег в репозитории

---

Данный регламент является основой для работы с кодовой базой нашего проекта и может быть дополнен или изменен по мере необходимости.